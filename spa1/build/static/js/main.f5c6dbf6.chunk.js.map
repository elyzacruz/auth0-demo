{"version":3,"sources":["logo.svg","assets/loading.svg","components/Loading.js","components/Logout.js","components/Profile.js","components/Login.js","components/Nav.js","components/Home.js","actionComponents/CallApi.js","App.js","index.js"],"names":["Loading","className","src","loading","alt","LogoutButton","logout","useAuth0","onClick","returnTo","window","location","origin","withAuthenticationRequired","user","isAuthenticated","picture","name","email","onRedirecting","LoginButton","loginWithRedirect","Navigation","Navbar","color","light","expand","Container","navbar","Logout","href","Home","Login","getAccessTokenSilently","alert","useState","userMetadata","setUserMetadata","apiRes","setApiRes","useEffect","a","domain","audience","scope","accessToken","userDetailsByIdUrl","sub","fetch","headers","Authorization","metadataResponse","json","userMetaData","response","responseData","JSON","stringify","console","log","message","getUserMetadata","history","createBrowserHistory","App","error","logo","exact","path","component","ReactDOM","render","clientId","redirectUri","document","getElementById"],"mappings":"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","file":"static/js/main.f5c6dbf6.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.6ce24c58.svg\";","export default __webpack_public_path__ + \"static/media/loading.330b7d99.svg\";","import React from \"react\";\nimport loading from \"../assets/loading.svg\";\n\nconst Loading = () => (\n  <div className=\"spinner\">\n    <img src={loading} alt=\"Loading\" />\n  </div>\n);\n\nexport default Loading;\n","import React from \"react\";\nimport { useAuth0 } from \"@auth0/auth0-react\";\n\nconst LogoutButton = () => {\n  const { logout } = useAuth0();\n\n  return (\n    <button onClick={() => logout({ returnTo: window.location.origin })}>\n      Log Out\n    </button>\n  );\n};\n\nexport default LogoutButton;","import React from \"react\";\n// import { Container, Row, Col } from \"reactstrap\";\n\n// import Highlight from \"../components/Highlight\";\nimport Loading from \"../components/Loading\";\nimport { useAuth0, withAuthenticationRequired } from \"@auth0/auth0-react\";\nimport LogoutButton from \"./Logout\";\n\nconst ProfileComponent = () => {\n  const { user, isAuthenticated } = useAuth0();\n\n  return (\n    <>\n    <p>SPA 1</p>\n    {isAuthenticated && (\n      <div>\n        <img src={user.picture} alt={user.name} />\n        <h2>{user.name}</h2>\n        <p>{user.email}</p>\n        {/* add button to redirect to spa2 */}\n      </div>\n    )}\n    </>\n  );\n};\n\nexport default withAuthenticationRequired(ProfileComponent, {\n    onRedirecting: () => <Loading />,\n  });","import React from \"react\";\nimport { useAuth0 } from \"@auth0/auth0-react\";\n\nconst LoginButton = () => {\n  const { loginWithRedirect } = useAuth0();\n\n  return <button onClick={() => loginWithRedirect()}>Log In</button>;\n};\n\nexport default LoginButton;","import React, { Fragment } from \"react\";\nimport { NavLink as RouterNavLink } from \"react-router-dom\";\nimport \"./Nav.css\";\nimport { useAuth0 } from \"@auth0/auth0-react\"; \nimport {\n  Collapse,\n  Container,\n  Navbar,\n  NavbarToggler,\n  NavbarBrand,\n  Nav,\n  NavItem,\n  NavLink,\n  Button,\n  UncontrolledDropdown,\n  DropdownToggle,\n  DropdownMenu,\n  DropdownItem,\n} from \"reactstrap\";\nimport LoginButton from \"./Login\";\nimport LogoutButton from \"./Logout\";\n\nconst Navigation = () => {\n  const { isAuthenticated } = useAuth0();\n  return (\n    <Navbar color=\"light\" light expand=\"md\">\n      <Container>\n        <Nav navbar>\n        {isAuthenticated && < LogoutButton />}\n        {isAuthenticated && (\n            <button\n            onClick={() => {\n              window.location.href=`${window.location.origin}/profile`\n            }}>\n              Profile\n          </button>\n        )}\n        {isAuthenticated && (\n            <button\n            onClick={() => {\n              window.location.href=`${window.location.origin}/callApi`\n            }}>\n              Call API\n          </button>\n        )}\n        </Nav>\n      </Container>\n    </Navbar>\n  );\n};\n\nexport default Navigation;\n","import React, { Fragment } from \"react\";\n\nimport { useAuth0} from \"@auth0/auth0-react\"; \n\n// import Hero from \"../components/Hero\";\n// import Content from \"../components/Content\";\n// import Load\nimport LoginButton from \"./Login\";\nimport LogoutButton from \"./Logout\";\n\nconst Home = () => {\n  const { isAuthenticated } = useAuth0();\n  return (!isAuthenticated &&\n  <Fragment>\n    <LoginButton />\n  </Fragment>)\n};\n\nexport default Home;\n","import React, { useEffect, useState } from \"react\";\nimport { useAuth0, withAuthenticationRequired } from \"@auth0/auth0-react\";\nimport Loading from \"../components/Loading\";\nconst externalAPI = \"https://s1n5lju3i9.execute-api.ap-southeast-2.amazonaws.com/default/stablada-auth0-poc-lambda\" || \"http://localhost:3060/userData\";\n\nconst CallApi = () => {\n  const { user, isAuthenticated, getAccessTokenSilently } = useAuth0();\n  alert('isAuthenticated: ', isAuthenticated);\n  const [userMetadata, setUserMetadata] = useState(null);\n  const [apiRes, setApiRes] = useState(null);\n\n  useEffect(() => {\n  const getUserMetadata = async () => {\n    const domain = \"whispir-tabs.au.auth0.com\";\n\n    try {\n      \n      const accessToken = await getAccessTokenSilently({\n        audience: `https://${domain}/api/v2/`,\n        scope: \"read:current_user\",\n      });\n\n      const userDetailsByIdUrl = `https://${domain}/api/v2/users/${user.sub}`;\n\n      const metadataResponse = await fetch(userDetailsByIdUrl, {\n        headers: {\n          Authorization: `Bearer ${accessToken}`,\n        },\n      });\n\n      const userMetaData = await metadataResponse.json();\n\n      const response = await fetch(externalAPI, {\n        headers: {\n          Authorization: `Bearer ${accessToken}`,\n        },\n      });\n\n      const responseData = await response.json();\n\n      setUserMetadata(userMetaData);\n      setApiRes(JSON.stringify(responseData));\n    } catch (e) {\n      console.log(e.message);\n    }\n  };\n\n  getUserMetadata();\n}, [getAccessTokenSilently, user?.sub]);\n\n  return (\n    isAuthenticated && (\n      <div>\n        <img src={user.picture} alt={user.name} />\n        <h2>{user.name}</h2>\n        <p>{user.email}</p>\n        <h3>User Metadata</h3>\n        {userMetadata ? (\n          <pre>{JSON.stringify(userMetadata, null, 2)}</pre>\n        ) : (\n          \"No user metadata defined\"\n        )}\n        {apiRes ? (\n          <>\n          <pre>API Response</pre>\n          <pre>{apiRes}</pre>\n          </>\n        ) : (\n          \"No api res\"\n        )}\n      </div>\n    )\n  );\n};\n\nexport default withAuthenticationRequired(CallApi, {\n    onRedirecting: () => <Loading />,\n  });","import React, {Fragment} from \"react\";\nimport { Router, Route, Switch, Redirect } from \"react-router-dom\";\nimport logo from './logo.svg';\nimport './App.css';\nimport NotFound from './components/NotFound';\nimport { useAuth0 } from \"@auth0/auth0-react\";\nimport Profile from \"./components/Profile\";\nimport Nav from \"./components/Nav\";\nimport Home from \"./components/Home\";\nimport CallApi from \"./actionComponents/CallApi\";\n// import history from \"./utils/history\";\nimport { createBrowserHistory } from \"history\";\nconst history = createBrowserHistory();\n\nfunction App() {\n  const { error } = useAuth0();\n\n  if (error) {\n    console.error('Error', error);\n    return <div>Oops... {error.message}</div>;\n  }\n\n  return (\n    <Router history={history}>\n    <div className=\"App\">\n      <Nav />\n      <header className=\"App-header\">\n        <img src={logo} className=\"App-logo\" alt=\"logo\" />\n          <p>SPA 1</p>\n          <Switch>\n            <Route exact path=\"/\" component={Home} />\n            {/* <Route path=\"/profile\" component={Profile} />\n            <Route path=\"/callApi\" component={CallApi} /> */}\n            \n\n          </Switch>\n      </header>\n    </div>\n    </Router>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport { Auth0Provider } from \"@auth0/auth0-react\";\n\nReactDOM.render(\n    <Auth0Provider\n      domain=\"whispir-tabs.au.auth0.com\"\n      clientId=\"rv7FbUY4fvJ3OkIKljPjappC0VbF4tbL\"\n      redirectUri={`${window.location.origin}`}\n      audience=\"https://s1n5lju3i9.execute-api.ap-southeast-2.amazonaws.com/default/stablada-auth0-poc-lambda\"\n      scope=\"read:current_user\"\n    >\n      <App />\n    </Auth0Provider>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}